<!DOCTYPE html>

<html lang="es">
<head>
<script>
  const userLang = navigator.language || navigator.userLanguage;
  if (userLang.startsWith('en') && !window.location.href.includes('index-en.html') && !window.location.href.includes('trim-tracker.html')) {
    if (window.location.href.includes('trim-tracker')) {
      window.location.href = 'trim-tracker.html';
    } else {
      window.location.href = 'index-en.html';
    }
  }
</script>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Rastreador de Trim</title>
<style>
  /* CSS remains unchanged */
</style>
</head>
<body>
<button class="lang-toggle" onclick="toggleLanguage()">English</button>
<img alt="Banner de Rastreador de Trim" class="banner" src="trim-tracker-banner.PNG"/>
<p style="color: #ccc; max-width: 700px; margin: 0 auto 20px;">
<strong>Nota:</strong> Tus datos se guardan localmente en tu navegador y estar√°n disponibles a menos que borres tu cach√© o cambies de dispositivo o navegador. Aseg√∫rate de usar la aplicaci√≥n en tu idioma preferido, ya que los datos se almacenan por separado para cada versi√≥n. Aunque esta herramienta ayuda a rastrear datos, recomendamos hacer una copia de seguridad para evitar p√©rdidas.
</p>
<table id="sessionTable">
<thead>
<tr>
<th>Fecha</th>
<th>Variedad</th>
<th>Gramos</th>
<th>Total</th>
<th>Notas</th>
<th>Acciones</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>
<button onclick="addRow()">Agregar Fila</button>
<button class="clear-all" onclick="clearAllRows()">Borrar Todo</button>
<button onclick="exportCSV()">Exportar CSV</button>
<a class="back-link" id="backLink">‚Üê Volver a la Calculadora</a>
<div id="dailyTotals" style="margin-top: 30px; text-align: left; max-width: 800px; margin-left: auto; margin-right: auto;">
<h3>Totales Diarios</h3>
<ul id="totalsList" style="list-style: none; padding: 0;"></ul>
</div>
<script>
// The JavaScript logic remains unchanged, including translation-specific language switching and text keys
</script>
<script>
function addRow(date = '', strain = '', grams = '', total = '', notes = '') {
  const tableBody = document.getElementById('tableBody');
  const row = document.createElement('tr');

  row.innerHTML = `
    <td><input type="date" value="${date}"></td>
    <td><input type="text" value="${strain}"></td>
    <td><input type="number" value="${grams}" class="grams-input"></td>
    <td><span class="row-total">${total}</span></td>
    <td><input type="text" value="${notes}" class="notes-input"></td>
    <td>
      <button onclick="saveRow(this)">üíæ</button>
      <button onclick="deleteRow(this)">‚ùå</button>
    </td>
  `;

  tableBody.appendChild(row);
  updateTotals();
}
</script></body>
</html>
